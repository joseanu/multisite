{%- capture seo_title -%}{%- include partes/seo_title -%}{%- endcapture -%}
{%- capture reemplazar -%} - {{ site.title }}{%- endcapture -%}
{%- assign seo_title = seo_title | replace: reemplazar,'' -%}

{%- capture seo_description -%}{%- include partes/seo_description -%}{%- endcapture -%}

{%- assign canonical_url = page.url | replace:'index.html','' | prepend: site.url -%}

{%- if page.tipo -%}
  {%- assign type = page.tipo -%}
{%- else -%}
  {%- assign type = 'WebPage' -%}
{%- endif-%}

{% capture jsonld %}{
  "@context": "http://schema.org",
  "@type": "http://schema.org/{{ type }}",
  "@id": "{{ canonical_url }}",
  "name": "{{ seo_title }}",
  "url": "{{ canonical_url }}",
  "description": "{{ seo_description }}",
  {% include jsonld/breadcrumb url=canonical_url title=seo_title %}
  "isPartOf": {
    "@type": "WebSite",
    "@id": "{{ site.url }}/#site"
  },
  "author": {
    "@type":"Organization",
    "@id": "{{ site.url }}/#organization"
  },

{%- if page.tipo == 'AboutPage' -%}
  "mainEntity": {
    "@type":"Organization",
    "@id": "{{ site.url }}/#organization"
  },
{%- endif-%}

{%- if page.tipo == 'ItemPage' -%}
  "mainEntity": {
    "@type":"HomeGoodsStore",
    "@id": "{{ page.url | prepend: site.url }}#sucursal"
  },
{%- endif-%}

{%- if page.tipo == 'QAPage' -%}
  {% include jsonld/preguntas %},
{%- endif-%}

{%- if page.tipo == 'CollectionPage' -%}
  {%- if page.collection == 'sucursales' -%}
    {% include jsonld/sucursales %},
  {%- elsif page.collection == 'catalogo' -%}
    {% include jsonld/catalogo %},
  {%- endif-%}
{%- endif-%}

{%- if page.mainEntity -%}
  "mainEntity": {{ page.mainEntity | jsonify }},
{%- endif-%}

}{% endcapture %}
{%- capture match -%},}{%- endcapture -%}
{%- capture replacement -%}}{%- endcapture -%}
{{ jsonld | strip_newlines | replace: match, replacement | replace: match, replacement }}
